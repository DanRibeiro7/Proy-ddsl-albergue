<div class="container-fluid p-4">
  <h2 class="mb-4 fw-bold text-primary">ðŸ“Š Dashboard de Operaciones</h2>

  <div class="row g-4 mb-5">
    
    <div class="col-md-3">
      <div class="card border-0 shadow-sm h-100 bg-primary text-white">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="text-uppercase mb-0">Hospedados Hoy</h6>
              <h2 class="display-4 fw-bold my-2">{{ totalActivos }}</h2>
              <small class="text-white-50">Personas en albergue</small>
            </div>
            <i class="bi bi-people-fill fs-1 opacity-50"></i>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card border-0 shadow-sm h-100 bg-success text-white">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="text-uppercase mb-0">Camas Libres</h6>
              <h2 class="display-4 fw-bold my-2">{{ camasDisponibles }}</h2>
              <small class="text-white-50">De {{ totalCamas }} totales</small>
            </div>
            <i class="bi bi-door-open-fill fs-1 opacity-50"></i>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body">
          <h6 class="text-muted text-uppercase mb-3">DistribuciÃ³n por Tipo</h6>
          <div class="d-flex justify-content-around text-center">
            <div *ngFor="let item of dataPorTipo">
              <div class="rounded-circle d-flex align-items-center justify-content-center mx-auto mb-2" 
                   [ngClass]="{'bg-info bg-opacity-10 text-info': item.nombre === 'ESTUDIANTE', 'bg-warning bg-opacity-10 text-warning': item.nombre === 'PACIENTE'}"
                   style="width: 60px; height: 60px;">
                <i class="bi fs-3" 
                   [ngClass]="{'bi-mortarboard-fill': item.nombre === 'ESTUDIANTE', 'bi-heart-pulse-fill': item.nombre === 'PACIENTE'}"></i>
              </div>
              <h4 class="fw-bold mb-0">{{ item.cantidad }}</h4>
              <small class="text-muted">{{ item.nombre }}s</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-8">
      <div class="card border-0 shadow-sm">
        <div class="card-header bg-white border-0 py-3">
          <h5 class="mb-0 fw-bold"><i class="bi bi-geo-alt-fill text-danger me-2"></i>Top Comunidades de Origen</h5>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover align-middle">
              <thead class="table-light">
                <tr>
                  <th>Comunidad / Procedencia</th>
                  <th class="text-end">Cantidad de Personas</th>
                  <th style="width: 40%;">Barra</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let lugar of topLugares">
                  <td class="fw-bold">{{ lugar.procedencia }}</td>
                  <td class="text-end">{{ lugar.cantidad }}</td>
                  <td>
                    <div class="progress" style="height: 8px;">
                      <div class="progress-bar bg-danger" 
                           role="progressbar" 
                           [style.width.%]="(lugar.cantidad / totalActivos) * 100"></div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card border-0 shadow-sm bg-dark text-white">
        <div class="card-body p-4 text-center">
          <i class="bi bi-printer-fill fs-1 mb-3 text-secondary"></i>
          <h5>Exportar Datos</h5>
          <p class="text-white-50 mb-4">Descarga el reporte detallado en Excel para la municipalidad.</p>
          <button class="btn btn-light w-100 fw-bold text-dark">
            <i class="bi bi-file-earmark-spreadsheet me-2"></i>Descargar Excel
          </button>
        </div>
      </div>
    </div>
  </div>
</div>